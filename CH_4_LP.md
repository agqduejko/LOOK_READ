### ■學習重點
怎麼開始：  
1-問題  
2-分析  
3-步驟  
4-執行

---
### 1-問題
【跨執行緒作業無效】
當你開【新執行緒】，但又存取主執行緒(也就是MAIN這個執行緒)時，就會發生這個錯誤。  
在主程式停止工作，想要讀取主程式的資料時，會發生這個錯誤，  
例：有一個TIMER，在一段時間後，醒來要讀主程式資料，有兩種狀況：  
1-如果主程式仍在工作，那就不會發生問題。  
2-如果主程式已停止，那就會發生【跨執行緒作業無效】  

---
### 2-分析
怎麼才能解決【跨執行緒作業無效】呢？  
比較好的方式為【委派】，步驟如下：  
> 1-如果【不在】同一個執行緒上  
> 2-呼叫【主程式】  
> 3-執行【主程式】的副程式  

---
### 3-步驟
■如果【不在】同一個執行緒上
> if (this.InvokeRequired)  

■呼叫【主程式】  
> public delegate void 委派ST(string AA);	//■1-宣告委派  
> 委派ST 執行;					//■2-把委派產生成物件  
> 執行=秀到_LOG;				//■3-只讓它連結一次  

■執行【主程式】的副程式  
> Invoke(執行,字串);			//■4-執行

★精簡寫法(1~4)
> Invoke(new 委派ST(秀到_LOG),字串);	//★精簡寫法，2,3,4連著寫，就是執行


---
### 3-步驟

步驟1：
> 作【老闆C】藍圖

屬性：
> 1-手上的錢  
> 2-顯示

功能：
> 1-給現金(金額)  
> 2-拿出現金(金額)  
> 3-秀到-LOG

---
### 4-執行

> 1-生出【老闆C】  
> 2-給【老闆C】250元  
> 3-【老闆C】，拿出10元  
> 4-【老闆C】，拿出100元

![](/assets/002_3_拿出錢_還要自己公佈_20170802.PNG)

